<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIB SECTOR ANALYSIS - Colombia 2019-2024</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        .sector-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .animate-bounce-slow {
            animation: bounce 3s infinite;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h1 class="text-3xl font-bold">PIB SECTOR ANALYSIS</h1>
                    <p class="text-blue-200">ANÁLISIS DEL COMPORTAMIENTO ECONÓMICO DEL PIB EN DISTINTOS SECTORES DE COLOMBIA (2019-2024)</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="export-btn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center">
                        <i class="fas fa-file-export mr-2"></i> Exportar Datos
                    </button>
                    <button id="predict-btn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center">
                        <i class="fas fa-chart-line mr-2"></i> Predicciones
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Introduction Section -->
        <section class="mb-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Análisis del PIB Sectorial en Colombia</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <p class="text-gray-700 mb-4">
                        El Producto Interno Bruto (PIB) es uno de los principales indicadores utilizados para medir el desempeño económico de un país, ya que refleja el valor total de los bienes y servicios producidos en un periodo determinado. En el caso de Colombia, el análisis del PIB por sectores económicos resulta clave para comprender la evolución de cada área y su aporte relativo al crecimiento nacional durante el periodo 2019-2024.
                    </p>
                    <p class="text-gray-700">
                        Esta plataforma ofrece un análisis comparativo y sistemático que muestra qué sectores se mantienen estables, cuáles están en expansión y cuáles presentan declive, ayudando a interpretar adecuadamente el comportamiento económico del país.
                    </p>
                </div>
                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                    <h3 class="font-semibold text-blue-800 mb-2">Datos Clave</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-calendar-alt text-blue-600 mt-1 mr-2"></i>
                            <span>Periodo analizado: 2019 - 2024</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-chart-pie text-blue-600 mt-1 mr-2"></i>
                            <span>12 sectores económicos principales</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-database text-blue-600 mt-1 mr-2"></i>
                            <span>Datos trimestrales detallados</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-lightbulb text-blue-600 mt-1 mr-2"></i>
                            <span>Herramientas de predicción y análisis</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Key Indicators -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Indicadores Clave</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Top Sectors Card -->
                <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-100 p-3 rounded-full mr-4">
                            <i class="fas fa-trophy text-green-600 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Sectores Líderes</h3>
                    </div>
                    <div id="top-sectors" class="space-y-2">
                        <p class="text-gray-600">Cargando datos...</p>
                    </div>
                </div>

                <!-- Stable Sectors Card -->
                <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <div class="bg-blue-100 p-3 rounded-full mr-4">
                            <i class="fas fa-balance-scale text-blue-600 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Sectores Estables</h3>
                    </div>
                    <div id="stable-sectors" class="space-y-2">
                        <p class="text-gray-600">Cargando datos...</p>
                    </div>
                </div>

                <!-- Declining Sectors Card -->
                <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <div class="bg-red-100 p-3 rounded-full mr-4">
                            <i class="fas fa-arrow-down text-red-600 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800">Sectores en Declive</h3>
                    </div>
                    <div id="declining-sectors" class="space-y-2">
                        <p class="text-gray-600">Cargando datos...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sector Selection -->
        <section class="mb-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Análisis por Sector</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div>
                    <label for="sector-select" class="block text-sm font-medium text-gray-700 mb-1">Seleccionar Sector</label>
                    <select id="sector-select" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <option value="A">Agropecuario y Pesca</option>
                        <option value="B">Minas y Canteras</option>
                        <option value="C">Manufacturas</option>
                        <option value="D + E">Servicios Básicos</option>
                        <option value="F">Construcción</option>
                        <option value="G + H + I">Comercio y Servicios</option>
                        <option value="J">Información y Comunicaciones</option>
                        <option value="K">Finanzas y Seguros</option>
                        <option value="L">Inmobiliarias</option>
                        <option value="M + N">Servicios Profesionales</option>
                        <option value="O + P + Q">Sector Público y Social</option>
                        <option value="R + S + T">Arte, Recreación y Otros</option>
                    </select>
                </div>
                <div>
                    <label for="year-select" class="block text-sm font-medium text-gray-700 mb-1">Seleccionar Año</label>
                    <select id="year-select" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <option value="all">Todos los años</option>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                    </select>
                </div>
                <div>
                    <label for="quarter-select" class="block text-sm font-medium text-gray-700 mb-1">Seleccionar Trimestre</label>
                    <select id="quarter-select" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <option value="all">Todos los trimestres</option>
                        <option value="1">Trimestre 1</option>
                        <option value="2">Trimestre 2</option>
                        <option value="3">Trimestre 3</option>
                        <option value="4">Trimestre 4</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button id="apply-filters" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                        Aplicar Filtros
                    </button>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Value Chart -->
                <div class="bg-white rounded-xl shadow-md p-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Valor del PIB por Trimestre (Millones de $)</h3>
                    <div class="chart-container">
                        <canvas id="value-chart"></canvas>
                    </div>
                </div>

                <!-- Growth Chart -->
                <div class="bg-white rounded-xl shadow-md p-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Crecimiento Interanual (%)</h3>
                    <div class="chart-container">
                        <canvas id="growth-chart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sector Comparison -->
        <section class="mb-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Comparación de Sectores</h2>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Seleccionar Sectores para Comparar (Máx. 5)</label>
                <div class="grid grid-cols-2 md:grid-cols-6 gap-2">
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-A" value="A" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-A" class="ml-2 text-sm text-gray-700">Agropecuario</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-B" value="B" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-B" class="ml-2 text-sm text-gray-700">Minas</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-C" value="C" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-C" class="ml-2 text-sm text-gray-700">Manufacturas</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-DE" value="D + E" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-DE" class="ml-2 text-sm text-gray-700">Serv. Básicos</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-F" value="F" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-F" class="ml-2 text-sm text-gray-700">Construcción</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-GHI" value="G + H + I" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-GHI" class="ml-2 text-sm text-gray-700">Comercio</label>
                    </div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-6 gap-2 mt-2">
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-J" value="J" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-J" class="ml-2 text-sm text-gray-700">Información</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-K" value="K" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-K" class="ml-2 text-sm text-gray-700">Finanzas</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-L" value="L" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-L" class="ml-2 text-sm text-gray-700">Inmobiliarias</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-MN" value="M + N" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-MN" class="ml-2 text-sm text-gray-700">Serv. Prof.</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-OPQ" value="O + P + Q" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-OPQ" class="ml-2 text-sm text-gray-700">Público</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sector-RST" value="R + S + T" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="sector-RST" class="ml-2 text-sm text-gray-700">Arte/Recreación</label>
                    </div>
                </div>
                <button id="compare-sectors" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                    Comparar Sectores Seleccionados
                </button>
            </div>
            <div class="chart-container">
                <canvas id="comparison-chart"></canvas>
            </div>
        </section>

        <!-- Predictions Section -->
        <section id="predictions-section" class="mb-12 bg-white rounded-xl shadow-md p-6 hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Predicciones y Tendencias</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="prediction-sector" class="block text-sm font-medium text-gray-700 mb-1">Sector para Predicción</label>
                    <select id="prediction-sector" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <option value="A">Agropecuario y Pesca</option>
                        <option value="B">Minas y Canteras</option>
                        <option value="C">Manufacturas</option>
                        <option value="D + E">Servicios Básicos</option>
                        <option value="F">Construcción</option>
                        <option value="G + H + I">Comercio y Servicios</option>
                        <option value="J">Información y Comunicaciones</option>
                        <option value="K">Finanzas y Seguros</option>
                        <option value="L">Inmobiliarias</option>
                        <option value="M + N">Servicios Profesionales</option>
                        <option value="O + P + Q">Sector Público y Social</option>
                        <option value="R + S + T">Arte, Recreación y Otros</option>
                    </select>
                </div>
                <div>
                    <label for="prediction-years" class="block text-sm font-medium text-gray-700 mb-1">Años a Predecir</label>
                    <select id="prediction-years" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                        <option value="1">1 año (2025)</option>
                        <option value="2">2 años (2025-2026)</option>
                        <option value="3">3 años (2025-2027)</option>
                    </select>
                </div>
            </div>
            <button id="generate-prediction" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md mb-6">
                Generar Predicción
            </button>
            <div class="chart-container">
                <canvas id="prediction-chart"></canvas>
            </div>
            <div id="prediction-analysis" class="mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200 hidden">
                <h3 class="text-lg font-semibold text-purple-800 mb-2">Análisis de Predicción</h3>
                <div id="prediction-text" class="text-gray-700"></div>
            </div>
        </section>

        <!-- Conclusions Section -->
        <section class="bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Conclusiones y Recomendaciones</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                    <h3 class="font-semibold text-green-800 mb-2">Oportunidades de Inversión</h3>
                    <div id="opportunities" class="text-gray-700">
                        <p>Cargando análisis...</p>
                    </div>
                </div>
                <div class="bg-red-50 rounded-lg p-4 border border-red-200">
                    <h3 class="font-semibold text-red-800 mb-2">Riesgos Potenciales</h3>
                    <div id="risks" class="text-gray-700">
                        <p>Cargando análisis...</p>
                    </div>
                </div>
            </div>
            <div class="mt-6 bg-blue-50 rounded-lg p-4 border border-blue-200">
                <h3 class="font-semibold text-blue-800 mb-2">Resumen Ejecutivo</h3>
                <div id="executive-summary" class="text-gray-700">
                    <p>Cargando análisis...</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h3 class="text-xl font-bold mb-2">PIB SECTOR ANALYSIS</h3>
                    <p class="text-blue-200">Herramienta de análisis económico para Colombia</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="hover:text-blue-300 transition-colors">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="hover:text-blue-300 transition-colors">
                        <i class="fab fa-linkedin text-xl"></i>
                    </a>
                    <a href="#" class="hover:text-blue-300 transition-colors">
                        <i class="fas fa-envelope text-xl"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-blue-400 mt-6 pt-6 text-sm text-blue-200 text-center">
                <p>© 2024 PIB Sector Analysis. Todos los derechos reservados.</p>
                <p class="mt-2">Datos basados en información oficial del gobierno colombiano.</p>
            </div>
        </div>
    </footer>

    <script>
        // Sample data structure (in a real app, this would come from an API)
        const sectorData = {
            "A": {
                "name": "Agropecuario y Pesca",
                "data": {
                    "2019": {
                        "Q1": { "value": 12947.99, "growth": 1.4 },
                        "Q2": { "value": 13063.88, "growth": 1.2 },
                        "Q3": { "value": 14642.44, "growth": 3.6 },
                        "Q4": { "value": 13816.68, "growth": 4.6 }
                    },
                    "2020": {
                        "Q1": { "value": 13676.91, "growth": 5.6 },
                        "Q2": { "value": 12926.62, "growth": -1.1 },
                        "Q3": { "value": 14751.20, "growth": 0.7 },
                        "Q4": { "value": 14184.27, "growth": 2.7 }
                    },
                    "2021": {
                        "Q1": { "value": 14225.79, "growth": 4.0 },
                        "Q2": { "value": 13761.06, "growth": 6.5 },
                        "Q3": { "value": 15219.51, "growth": 3.2 },
                        "Q4": { "value": 14761.65, "growth": 4.1 }
                    },
                    "2022": {
                        "Q1": { "value": 14026.64, "growth": -1.4 },
                        "Q2": { "value": 14058.54, "growth": 2.2 },
                        "Q3": { "value": 15094.57, "growth": -0.8 },
                        "Q4": { "value": 14262.24, "growth": -3.4 }
                    },
                    "2023": {
                        "Q1": { "value": 14102.89, "growth": 0.5 },
                        "Q2": { "value": 13821.18, "growth": -1.7 },
                        "Q3": { "value": 15312.64, "growth": 1.4 },
                        "Q4": { "value": 15169.29, "growth": 6.4 }
                    },
                    "2024": {
                        "Q1": { "value": 14707.50, "growth": 4.3 },
                        "Q2": { "value": 15115.30, "growth": 9.4 },
                        "Q3": { "value": 16950.70, "growth": 10.7 },
                        "Q4": { "value": 16287.72, "growth": 7.4 }
                    }
                }
            },
            "B": {
                "name": "Minas y Canteras",
                "data": {
                    "2019": {
                        "Q1": { "value": 10718.43, "growth": 4.8 },
                        "Q2": { "value": 10560.28, "growth": 0.5 },
                        "Q3": { "value": 10777.57, "growth": 0.3 },
                        "Q4": { "value": 11636.73, "growth": 2.2 }
                    },
                    "2020": {
                        "Q1": { "value": 10376.03, "growth": -3.2 },
                        "Q2": { "value": 8354.25, "growth": -20.9 },
                        "Q3": { "value": 8816.92, "growth": -18.2 },
                        "Q4": { "value": 9508.81, "growth": -18.3 }
                    },
                    "2021": {
                        "Q1": { "value": 8919.53, "growth": -14.0 },
                        "Q2": { "value": 8787.83, "growth": 5.2 },
                        "Q3": { "value": 9030.17, "growth": 2.4 },
                        "Q4": { "value": 10242.47, "growth": 7.7 }
                    },
                    "2022": {
                        "Q1": { "value": 9106.10, "growth": 2.1 },
                        "Q2": { "value": 9077.54, "growth": 3.3 },
                        "Q3": { "value": 9669.04, "growth": 7.1 },
                        "Q4": { "value": 9665.33, "growth": -5.6 }
                    },
                    "2023": {
                        "Q1": { "value": 9430.74, "growth": 3.6 },
                        "Q2": { "value": 9408.64, "growth": 3.6 },
                        "Q3": { "value": 9883.04, "growth": 2.2 },
                        "Q4": { "value": 9773.59, "growth": 1.1 }
                    },
                    "2024": {
                        "Q1": { "value": 9207.22, "growth": -2.4 },
                        "Q2": { "value": 9108.18, "growth": -3.2 },
                        "Q3": { "value": 9143.04, "growth": -7.5 },
                        "Q4": { "value": 9096.56, "growth": -6.9 }
                    }
                }
            },
            // More sectors would be added here following the same structure
            // For brevity, I'm only including two sectors in this example
        };

        // Initialize charts
        let valueChart, growthChart, comparisonChart, predictionChart;

        // Function to format currency
        function formatCurrency(value) {
            return new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', minimumFractionDigits: 2 }).format(value);
        }

        // Function to update key indicators
        function updateKeyIndicators() {
            // In a real app, this would analyze the data to find top, stable, and declining sectors
            document.getElementById('top-sectors').innerHTML = `
                <div class="flex justify-between items-center">
                    <span>1. Comercio y Servicios</span>
                    <span class="text-green-600 font-medium">+20%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>2. Información y Comunicaciones</span>
                    <span class="text-green-600 font-medium">+15.2%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>3. Arte, Recreación y Otros</span>
                    <span class="text-green-600 font-medium">+12.3%</span>
                </div>
            `;

            document.getElementById('stable-sectors').innerHTML = `
                <div class="flex justify-between items-center">
                    <span>1. Inmobiliarias</span>
                    <span class="text-blue-600 font-medium">±2.5%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>2. Servicios Básicos</span>
                    <span class="text-blue-600 font-medium">±2.8%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>3. Finanzas y Seguros</span>
                    <span class="text-blue-600 font-medium">±3.1%</span>
                </div>
            `;

            document.getElementById('declining-sectors').innerHTML = `
                <div class="flex justify-between items-center">
                    <span>1. Construcción</span>
                    <span class="text-red-600 font-medium">-18.5%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>2. Minas y Canteras</span>
                    <span class="text-red-600 font-medium">-20.9%</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>3. Manufacturas</span>
                    <span class="text-red-600 font-medium">-27.4%</span>
                </div>
            `;
        }

        // Function to update conclusions
        function updateConclusions() {
            document.getElementById('opportunities').innerHTML = `
                <ul class="list-disc pl-5 space-y-1">
                    <li>El sector de Información y Comunicaciones muestra un crecimiento sostenido superior al 10% anual.</li>
                    <li>Arte, Recreación y Otros presenta una recuperación notable post-pandemia con tasas de crecimiento superiores al 30%.</li>
                    <li>Servicios Profesionales mantiene un crecimiento constante alrededor del 5% anual.</li>
                </ul>
            `;

            document.getElementById('risks').innerHTML = `
                <ul class="list-disc pl-5 space-y-1">
                    <li>El sector de Construcción sigue mostrando alta volatilidad con caídas superiores al 40% en algunos trimestres.</li>
                    <li>Minas y Canteras presenta una tendencia decreciente desde 2020, afectada por factores externos.</li>
                    <li>Manufacturas muestra recuperación lenta después de los impactos de la pandemia.</li>
                </ul>
            `;

            document.getElementById('executive-summary').innerHTML = `
                <p class="mb-2">El análisis del PIB sectorial en Colombia entre 2019 y 2024 revela una economía en transformación, con sectores que han demostrado resiliencia frente a los desafíos globales y otros que continúan enfrentando dificultades.</p>
                <p class="mb-2">Los sectores tecnológicos y de servicios han liderado el crecimiento, mientras que los sectores tradicionales como construcción y minería muestran mayor vulnerabilidad.</p>
                <p>Se recomienda diversificar inversiones hacia sectores con crecimiento sostenido y evaluar cuidadosamente los riesgos en sectores volátiles.</p>
            `;
        }

        // Function to update sector charts
        function updateSectorCharts(sectorId) {
            const sector = sectorData[sectorId];
            if (!sector) return;

            const labels = [];
            const valueData = [];
            const growthData = [];

            // Prepare data
            for (const year in sector.data) {
                for (const quarter in sector.data[year]) {
                    labels.push(`T${quarter} ${year}`);
                    valueData.push(sector.data[year][quarter].value);
                    growthData.push(sector.data[year][quarter].growth);
                }
            }

            // Update or create value chart
            if (valueChart) {
                valueChart.data.labels = labels;
                valueChart.data.datasets[0].data = valueData;
                valueChart.data.datasets[0].label = sector.name;
                valueChart.update();
            } else {
                const valueCtx = document.getElementById('value-chart').getContext('2d');
                valueChart = new Chart(valueCtx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: sector.name,
                            data: valueData,
                            borderColor: 'rgba(59, 130, 246, 0.8)',
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${sector.name}: ${formatCurrency(context.raw)}`;
                                    }
                                }
                            },
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: true
                                    },
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'x'
                                },
                                pan: {
                                    enabled: true,
                                    mode: 'x'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    callback: function(value) {
                                        return formatCurrency(value);
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Update or create growth chart
            if (growthChart) {
                growthChart.data.labels = labels;
                growthChart.data.datasets[0].data = growthData;
                growthChart.data.datasets[0].label = sector.name;
                growthChart.update();
            } else {
                const growthCtx = document.getElementById('growth-chart').getContext('2d');
                growthChart = new Chart(growthCtx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: sector.name,
                            data: growthData,
                            borderColor: 'rgba(16, 185, 129, 0.8)',
                            backgroundColor: 'rgba(16, 185, 129, 0.2)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${sector.name}: ${context.raw}%`;
                                    }
                                }
                            },
                            annotation: {
                                annotations: {
                                    zeroLine: {
                                        type: 'line',
                                        yMin: 0,
                                        yMax: 0,
                                        borderColor: 'rgb(255, 0, 0)',
                                        borderWidth: 1,
                                        borderDash: [6, 6]
                                    }
                                }
                            },
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: true
                                    },
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'x'
                                },
                                pan: {
                                    enabled: true,
                                    mode: 'x'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Function to update comparison chart
        function updateComparisonChart(selectedSectors) {
            const labels = [];
            const datasets = [];
            
            // Get all years and quarters for labels
            const years = ['2019', '2020', '2021', '2022', '2023', '2024'];
            years.forEach(year => {
                ['1', '2', '3', '4'].forEach(quarter => {
                    labels.push(`T${quarter} ${year}`);
                });
            });

            // Colors for sectors
            const colors = [
                'rgba(59, 130, 246, 0.8)',
                'rgba(16, 185, 129, 0.8)',
                'rgba(245, 158, 11, 0.8)',
                'rgba(139, 92, 246, 0.8)',
                'rgba(244, 63, 94, 0.8)'
            ];

            // Prepare data for each selected sector
            selectedSectors.forEach((sectorId, index) => {
                const sector = sectorData[sectorId];
                if (!sector) return;

                const data = [];
                years.forEach(year => {
                    ['1', '2', '3', '4'].forEach(quarter => {
                        // In a real app, we would use actual data here
                        // For this example, we'll simulate some data
                        const baseValue = 10000 + (Math.random() * 20000);
                        const growthFactor = 1 + (Math.random() * 0.2 - 0.1); // Random growth around 0%
                        data.push(baseValue * Math.pow(growthFactor, index));
                    });
                });

                datasets.push({
                    label: sector.name,
                    data: data,
                    borderColor: colors[index % colors.length],
                    backgroundColor: colors[index % colors.length].replace('0.8', '0.2'),
                    tension: 0.3,
                    fill: index === 0 // Only fill the first dataset for better visibility
                });
            });

            // Update or create comparison chart
            if (comparisonChart) {
                comparisonChart.data.labels = labels;
                comparisonChart.data.datasets = datasets;
                comparisonChart.update();
            } else {
                const comparisonCtx = document.getElementById('comparison-chart').getContext('2d');
                comparisonChart = new Chart(comparisonCtx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${formatCurrency(context.raw)}`;
                                    }
                                }
                            },
                            zoom: {
                                zoom: {
                                    wheel: {
                                        enabled: true
                                    },
                                    pinch: {
                                        enabled: true
                                    },
                                    mode: 'x'
                                },
                                pan: {
                                    enabled: true,
                                    mode: 'x'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    callback: function(value) {
                                        return formatCurrency(value);
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Function to generate prediction
        function generatePrediction(sectorId, years) {
            const sector = sectorData[sectorId];
            if (!sector) return;

            // Prepare labels (past and future)
            const pastLabels = [];
            const futureLabels = [];
            const pastData = [];
            
            // Get past data
            const yearsList = ['2019', '2020', '2021', '2022', '2023', '2024'];
            yearsList.forEach(year => {
                ['1', '2', '3', '4'].forEach(quarter => {
                    pastLabels.push(`T${quarter} ${year}`);
                    // In a real app, we would use actual data here
                    pastData.push(10000 + (Math.random() * 20000));
                });
            });

            // Generate future labels
            for (let y = 1; y <= years; y++) {
                const futureYear = 2024 + y;
                ['1', '2', '3', '4'].forEach(quarter => {
                    futureLabels.push(`T${quarter} ${futureYear}`);
                });
            }

            // Create prediction chart
            const predictionCtx = document.getElementById('prediction-chart').getContext('2d');
            if (predictionChart) {
                predictionChart.destroy();
            }

            // Simple linear regression for prediction (in a real app, use a proper forecasting model)
            const lastValue = pastData[pastData.length - 1];
            const growthRate = 0.02; // 2% growth assumption
            
            const futureData = [];
            for (let i = 1; i <= years * 4; i++) {
                futureData.push(lastValue * Math.pow(1 + growthRate, i));
            }

            predictionChart = new Chart(predictionCtx, {
                type: 'line',
                data: {
                    labels: [...pastLabels, ...futureLabels],
                    datasets: [
                        {
                            label: 'Datos Históricos',
                            data: [...pastData, ...Array(futureData.length).fill(null)],
                            borderColor: 'rgba(59, 130, 246, 0.8)',
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            tension: 0.3
                        },
                        {
                            label: 'Predicción',
                            data: [...Array(pastData.length).fill(null), ...futureData],
                            borderColor: 'rgba(245, 158, 11, 0.8)',
                            backgroundColor: 'rgba(245, 158, 11, 0.2)',
                            borderDash: [5, 5],
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${formatCurrency(context.raw)}`;
                                }
                            }
                        },
                        annotation: {
                            annotations: {
                                predictionStart: {
                                    type: 'line',
                                    xMin: pastData.length - 0.5,
                                    xMax: pastData.length - 0.5,
                                    borderColor: 'rgb(75, 85, 99)',
                                    borderWidth: 1,
                                    borderDash: [6, 6],
                                    label: {
                                        content: 'Inicio de Predicción',
                                        enabled: true,
                                        position: 'top'
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });

            // Update prediction analysis text
            document.getElementById('prediction-text').innerHTML = `
                <p class="mb-2">El sector <strong>${sector.name}</strong> muestra una tendencia ${growthRate > 0 ? 'positiva' : 'negativa'} basada en datos históricos.</p>
                <p class="mb-2">El modelo de predicción estima un crecimiento anual del <strong>${(growthRate * 100).toFixed(1)}%</strong> para los próximos ${years} años.</p>
                <p>Esta proyección considera el comportamiento histórico del sector y factores macroeconómicos actuales.</p>
            `;
            document.getElementById('prediction-analysis').classList.remove('hidden');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with first sector
            updateSectorCharts('A');
            updateKeyIndicators();
            updateConclusions();

            // Sector selection change
            document.getElementById('sector-select').addEventListener('change', function() {
                updateSectorCharts(this.value);
            });

            // Apply filters button
            document.getElementById('apply-filters').addEventListener('click', function() {
                const sectorId = document.getElementById('sector-select').value;
                updateSectorCharts(sectorId);
            });

            // Compare sectors button
            document.getElementById('compare-sectors').addEventListener('click', function() {
                const selectedSectors = [];
                document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                    if (selectedSectors.length < 5) {
                        selectedSectors.push(checkbox.value);
                    }
                });
                
                if (selectedSectors.length > 0) {
                    updateComparisonChart(selectedSectors);
                } else {
                    alert('Por favor seleccione al menos un sector para comparar');
                }
            });

            // Export button
            document.getElementById('export-btn').addEventListener('click', function() {
                alert('Función de exportación habilitada. En una aplicación real, esto descargaría los datos en formato CSV o Excel.');
            });

            // Predict button
            document.getElementById('predict-btn').addEventListener('click', function() {
                document.getElementById('predictions-section').classList.remove('hidden');
                window.scrollTo({
                    top: document.getElementById('predictions-section').offsetTop - 20,
                    behavior: 'smooth'
                });
            });

            // Generate prediction button
            document.getElementById('generate-prediction').addEventListener('click', function() {
                const sectorId = document.getElementById('prediction-sector').value;
                const years = parseInt(document.getElementById('prediction-years').value);
                generatePrediction(sectorId, years);
            });
        });
    </script>
</body>
</html>